# Falling Bird

The Falling Bird game is a complete game example that demonstrates how animation, gravity and projectiles work inside the game engine. Use the A button to keep your bird in the air and avoid obstacles. Look at the code and download the game to your BrainPad Pulse to see how it works. Press "Done" to exit the tutorial and modify the code.


```blocks
enum SpriteKind {
    Player,
    Enemy,
    Gap
}
enum ActionKind {
    Walking,
    Idle,
    Jumping,
    Flapping
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    game.over()
})
input.buttonA.onEvent(ButtonEvent.Down, function () {
    smartyBird.vy = -100
    animation.setAction(smartyBird, ActionKind.Flapping)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Gap, function (sprite, otherSprite) {
    if (otherSprite.right - sprite.left < 2) {
        info.changeScoreBy(1)
    }
})
input.buttonB.onEvent(ButtonEvent.Down, function () {
    smartyBird.vy = -100
    animation.setAction(smartyBird, ActionKind.Flapping)
})
let projectile: Sprite = null
let gapSprite: Sprite = null
let gapImage: Image = null
let bottomImage: Image = null
let topImage: Image = null
let gap = 0
let smartyBird: Sprite = null
info.setScore(0)
smartyBird = sprites.create(img`
    . . . . . e . . e . . . . . . . 
    . . . . . . e . . e . . . . . . 
    . . . . . . . e . . e . . . . . 
    . . . . . . e e e e e e . . . . 
    . . . . . e e . . . . . e . . . 
    . e e e e e . . . . . . . e . . 
    e e . . e . . . . e e . e e e . 
    . e e . . e . . . e e e e e e . 
    . . e . . . e e . e . e e . e . 
    e e e e . . . e . e . e e . e . 
    e . . e e . . e . e e e e e e e 
    e . . . e e e . . . e e e . . . 
    e e . . . . . . . . . . e e e . 
    . e e . . . . . . . . . . e . . 
    . . e e . . . . . . . . e e . . 
    . . . . e e e e e e e e e . . . 
    `, SpriteKind.Player)
let anim = animation.createAnimation(ActionKind.Flapping, 50)
anim.addAnimationFrame(img`
    . . . . . e . . e . . . . . . . 
    . . . . . . e . . e . . . . . . 
    . . . . . . . e . . e . . . . . 
    . . . . . . e e e e e e . . . . 
    . . . . . e e . . . . . e . . . 
    . e e e e e . . . . . . . e . . 
    e e . . e . . . . e e . e e e . 
    . e e . . e . . . e e e e e e . 
    . . e . . . e e . e . e e . e . 
    e e e e . . . e . e . e e . e . 
    e . . e e . . e . e e e e e e e 
    e . . . e e e . . . e e e . . . 
    e e . . . . . . . . . . e e e . 
    . e e . . . . . . . . . . e . . 
    . . e e . . . . . . . . e e . . 
    . . . . e e e e e e e e e . . . 
    `)
anim.addAnimationFrame(img`
    . . . . . . . . . . . . . . . . 
    . . . e e e e . e e . . . . . . 
    . . . . . . . e . . e . . . . . 
    . . . . . . e e e e e e . . . . 
    . . . . . e e . . . . . e . . . 
    . . . . . e . . . . . . . e . . 
    . . . . . e . . . e e . e e e . 
    . . . . e . . . . e e e e e e . 
    . . e e e e . . . e . e e . e . 
    . e . . . . e . . e . e e . e . 
    e . . . . . . e . e e e e e e e 
    . e . . . . e . . . e e e . . . 
    . . e e e e . . . . . . e e e . 
    . . e . . . . . . . . . . e . . 
    . . e e . . . . . . . . e e . . 
    . . . . e e e e e e e e e . . . 
    `)
anim.addAnimationFrame(img`
    . . . . . . . . . . . . . . . . 
    . . . . . e e . e e . . . . . . 
    . . . . e . . e . . e . . . . . 
    . . . . . . e e e e e e . . . . 
    . . . . . e e . . . . . e . . . 
    . . . . . e . . . . . . . e . . 
    . . . . . e . . . e e . e e e . 
    . . . e e e . . . e e e e e e . 
    . . e e . . e . . e . e e . e . 
    . e e . . . e . . e . e e . e . 
    e e . . . e e . . e e e e e e e 
    e . . . e . . . . . e e e . . . 
    e . . e . . . . . . . . e e e . 
    e e e e . . . . . . . . . e . . 
    . . e e . . . . . . . . e e . . 
    . . . . e e e e e e e e e . . . 
    `)
animation.attachAnimation(smartyBird, anim)
animation.setAction(smartyBird, ActionKind.Flapping)
smartyBird.ay = 250
game.onUpdate(function () {
    if (smartyBird.vy == -5) {
        animation.setAction(smartyBird, ActionKind.Idle)
    }
    if (smartyBird.bottom > 74) {
        game.over(false)
    }
})
game.onUpdateInterval(1500, function () {
    gap = randint(0, 3)
    if (gap == 0) {
        topImage = img`
            .....eeeeee.....
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            `
        bottomImage = img`
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            .....eeeeee.....
            ....e......e....
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ...ee......ee...
            ..ee.e....e.ee..
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ...ee......ee...
            ..ee.e....e.ee..
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            .....eeeeee.....
            `
    } else if (gap == 1) {
        topImage = img`
            .....eeeeee.....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e.eeee.e....
            ..ee.e....e.ee..
            ...ee......ee...
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            `
        bottomImage = img`
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ...ee......ee...
            ..ee.e....e.ee..
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            .....eeeeee.....
            `
    } else if (gap == 2) {
        topImage = img`
            .....eeeeee.....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e.eeee.e....
            ..ee.e....e.ee..
            ...ee......ee...
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e.eeee.e....
            ..ee.e....e.ee..
            ...ee......ee...
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            `
        bottomImage = img`
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ......3333......
            .....e....e.....
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ...ee......ee...
            ..ee.e....e.ee..
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            .....eeeeee.....
            `
    } else {
        topImage = img`
            .....eeeeee.....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e.eeee.e....
            ..ee.e....e.ee..
            ...ee......ee...
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ....e.eeee.e....
            ..ee.e....e.ee..
            ...ee......ee...
            ....e......e....
            ....e......e....
            ....e......e....
            ....e......e....
            ...eee....eee...
            ......eeee......
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            `
        bottomImage = img`
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            .....eeeeee.....
            ....e......e....
            ....e.eeee.e....
            ....e......e....
            ....e......e....
            .....eeeeee.....
            `
    }
    gapImage = image.create(2, scene.screenHeight())
    gapImage.fill(0)
    gapSprite = sprites.create(gapImage, SpriteKind.Gap)
    gapSprite.setFlag(SpriteFlag.AutoDestroy, true)
    gapSprite.setFlag(SpriteFlag.Ghost, true)
    gapSprite.left = scene.screenWidth()
    gapSprite.vx = -45
    projectile = sprites.createProjectile(topImage, -45, 0, SpriteKind.Enemy)
    projectile.top = -3
    projectile = sprites.createProjectile(bottomImage, -45, 0, SpriteKind.Enemy)
    projectile.bottom = scene.screenHeight()
})

```
